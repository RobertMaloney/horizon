var app=require("app"),BrowserWindow=require("browser-window"),Menu=require("menu"),Tray=require("tray"),NativeImage=require("native-image");require("crash-reporter").start();var mainWindow=null,mainTray=null;app.on("window-all-closed",function(){"darwin"!=process.platform&&app.quit()}),app.on("ready",function(){var i=require("screen"),a=i.getPrimaryDisplay().workAreaSize;mainWindow=new BrowserWindow({width:a.width,height:a.height/2,frame:!1,"skip-taskbar":!0}),mainWindow.loadUrl("file://"+__dirname+"/main.html"),mainWindow.show(),mainWindow.openDevTools(),mainWindow.on("closed",function(){mainWindow=null});var e=NativeImage.createFromPath(__dirname.slice(2)+"/css/tray.png");mainTray=new Tray(e);var r=Menu.buildFromTemplate([{label:"Quit",type:"normal",click:function(){mainWindow.close()}}]);mainTray.setToolTip("This is my application."),mainTray.setContextMenu(r)});